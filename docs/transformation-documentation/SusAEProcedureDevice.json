{
  "omopTable": "DeviceExposure",
  "origin": "SUS",
  "omopColumns": [
    {
      "name": "nhs_number",
      "operation_description": "Value copied from `NHSNumber`",
      "dataSource": [
        {
          "name": "NHSNumber",
          "description": "Patient NHS Number",
          "origins": [
            {
              "origin": "NHS NUMBER",
              "url": "https://www.datadictionary.nhs.uk/data_elements/nhs_number.html"
            }
          ]
        }
      ],
      "query": "\n\tselect\n\t\tdistinct\n\t\t\tae.GeneratedRecordIdentifier,\n\t\t\tae.NHSNumber,\n\t\t\tae.CDSActivityDate as PrimaryProcedureDate,\n\t\t\tp.AccidentAndEmergencyTreatment as PrimaryProcedure\n\tfrom omop_staging.sus_AE ae\n\t\tinner join omop_staging.sus_AE_treatment p\n\t\t\ton AE.MessageId = p.MessageId\n\twhere NHSNumber is not null\n\t",
      "lookup_table_markdown": null
    },
    {
      "name": "device_concept_id",
      "operation_description": "Finds related devices for a concept.",
      "dataSource": null,
      "query": null,
      "lookup_table_markdown": null
    },
    {
      "name": "device_exposure_start_date",
      "operation_description": "Converts text to dates.",
      "dataSource": [
        {
          "name": "PrimaryProcedureDate",
          "description": "Procedure Date.",
          "origins": [
            {
              "origin": "PROCEDURE DATE",
              "url": "https://www.datadictionary.nhs.uk/data_elements/procedure_date.html"
            }
          ]
        }
      ],
      "query": "\n\tselect\n\t\tdistinct\n\t\t\tae.GeneratedRecordIdentifier,\n\t\t\tae.NHSNumber,\n\t\t\tae.CDSActivityDate as PrimaryProcedureDate,\n\t\t\tp.AccidentAndEmergencyTreatment as PrimaryProcedure\n\tfrom omop_staging.sus_AE ae\n\t\tinner join omop_staging.sus_AE_treatment p\n\t\t\ton AE.MessageId = p.MessageId\n\twhere NHSNumber is not null\n\t",
      "lookup_table_markdown": null
    },
    {
      "name": "device_exposure_start_datetime",
      "operation_description": "Combines a date with a time of day.",
      "dataSource": [
        {
          "name": "PrimaryProcedureDate",
          "description": "Procedure Date.",
          "origins": [
            {
              "origin": "PROCEDURE DATE",
              "url": "https://www.datadictionary.nhs.uk/data_elements/procedure_date.html"
            }
          ]
        }
      ],
      "query": "\n\tselect\n\t\tdistinct\n\t\t\tae.GeneratedRecordIdentifier,\n\t\t\tae.NHSNumber,\n\t\t\tae.CDSActivityDate as PrimaryProcedureDate,\n\t\t\tp.AccidentAndEmergencyTreatment as PrimaryProcedure\n\tfrom omop_staging.sus_AE ae\n\t\tinner join omop_staging.sus_AE_treatment p\n\t\t\ton AE.MessageId = p.MessageId\n\twhere NHSNumber is not null\n\t",
      "lookup_table_markdown": null
    },
    {
      "name": "device_exposure_end_date",
      "operation_description": "Converts text to dates.",
      "dataSource": [
        {
          "name": "PrimaryProcedureDate",
          "description": "Procedure Date.",
          "origins": [
            {
              "origin": "PROCEDURE DATE",
              "url": "https://www.datadictionary.nhs.uk/data_elements/procedure_date.html"
            }
          ]
        }
      ],
      "query": "\n\tselect\n\t\tdistinct\n\t\t\tae.GeneratedRecordIdentifier,\n\t\t\tae.NHSNumber,\n\t\t\tae.CDSActivityDate as PrimaryProcedureDate,\n\t\t\tp.AccidentAndEmergencyTreatment as PrimaryProcedure\n\tfrom omop_staging.sus_AE ae\n\t\tinner join omop_staging.sus_AE_treatment p\n\t\t\ton AE.MessageId = p.MessageId\n\twhere NHSNumber is not null\n\t",
      "lookup_table_markdown": null
    },
    {
      "name": "device_exposure_end_datetime",
      "operation_description": "Combines a date with a time of day.",
      "dataSource": [
        {
          "name": "PrimaryProcedureDate",
          "description": "Procedure Date.",
          "origins": [
            {
              "origin": "PROCEDURE DATE",
              "url": "https://www.datadictionary.nhs.uk/data_elements/procedure_date.html"
            }
          ]
        }
      ],
      "query": "\n\tselect\n\t\tdistinct\n\t\t\tae.GeneratedRecordIdentifier,\n\t\t\tae.NHSNumber,\n\t\t\tae.CDSActivityDate as PrimaryProcedureDate,\n\t\t\tp.AccidentAndEmergencyTreatment as PrimaryProcedure\n\tfrom omop_staging.sus_AE ae\n\t\tinner join omop_staging.sus_AE_treatment p\n\t\t\ton AE.MessageId = p.MessageId\n\twhere NHSNumber is not null\n\t",
      "lookup_table_markdown": null
    },
    {
      "name": "device_type_concept_id",
      "operation_description": "Constant value set to `32818`. `EHR administration record`",
      "dataSource": null,
      "query": null,
      "lookup_table_markdown": null
    },
    {
      "name": "device_source_concept_id",
      "operation_description": "Lookup discharge destination concept.",
      "dataSource": [
        {
          "name": "PrimaryProcedure",
          "description": "\n\t\t\tACCIDENT AND EMERGENCY TREATMENT is a six character code, comprising:\n\t\t\t\tCondition\tn2 (see Treatment Table below)\n\t\t\t\tSub-Analysis\tn1 (see Sub-analysis Table below)\n\t\t\t\tLocal use\tup to an3\n\t\t\t",
          "origins": [
            {
              "origin": "ACCIDENT and EMERGENCY CLINICAL CODES",
              "url": null
            }
          ]
        }
      ],
      "query": "\n\tselect\n\t\tdistinct\n\t\t\tae.GeneratedRecordIdentifier,\n\t\t\tae.NHSNumber,\n\t\t\tae.CDSActivityDate as PrimaryProcedureDate,\n\t\t\tp.AccidentAndEmergencyTreatment as PrimaryProcedure\n\tfrom omop_staging.sus_AE ae\n\t\tinner join omop_staging.sus_AE_treatment p\n\t\t\ton AE.MessageId = p.MessageId\n\twhere NHSNumber is not null\n\t",
      "lookup_table_markdown": "\r\n\r\n|PrimaryProcedure|device_source_concept_id|notes|\r\n|------|-----|-----|\r\n|01|45768233|X-ray|\r\n|02|45768113|Electrocardiograph|\r\n|08|45768357|Microscope (histology)|\r\n|10|45768281|Ultrasound|\r\n|11|4234381|Magnetic Resonance Imaging (MRI)|\r\n|12|45762714|Computerised Tomography (CT)|\r\n|09|45762714|Computerised Tomography (CT)|\r\n|19|618883|Blood culture bottle|\r\n\r\n"
    },
    {
      "name": "device_source_value",
      "operation_description": "Value copied from `PrimaryProcedure`",
      "dataSource": [
        {
          "name": "PrimaryProcedure",
          "description": "\n\t\t\tACCIDENT AND EMERGENCY TREATMENT is a six character code, comprising:\n\t\t\t\tCondition\tn2 (see Treatment Table below)\n\t\t\t\tSub-Analysis\tn1 (see Sub-analysis Table below)\n\t\t\t\tLocal use\tup to an3\n\t\t\t",
          "origins": [
            {
              "origin": "ACCIDENT and EMERGENCY CLINICAL CODES",
              "url": null
            }
          ]
        }
      ],
      "query": "\n\tselect\n\t\tdistinct\n\t\t\tae.GeneratedRecordIdentifier,\n\t\t\tae.NHSNumber,\n\t\t\tae.CDSActivityDate as PrimaryProcedureDate,\n\t\t\tp.AccidentAndEmergencyTreatment as PrimaryProcedure\n\tfrom omop_staging.sus_AE ae\n\t\tinner join omop_staging.sus_AE_treatment p\n\t\t\ton AE.MessageId = p.MessageId\n\twhere NHSNumber is not null\n\t",
      "lookup_table_markdown": null
    },
    {
      "name": "HospitalProviderSpellNumber",
      "operation_description": "Value copied from `AEAttendanceNumber`",
      "dataSource": [],
      "query": "\n\tselect\n\t\tdistinct\n\t\t\tae.GeneratedRecordIdentifier,\n\t\t\tae.NHSNumber,\n\t\t\tae.CDSActivityDate as PrimaryProcedureDate,\n\t\t\tp.AccidentAndEmergencyTreatment as PrimaryProcedure\n\tfrom omop_staging.sus_AE ae\n\t\tinner join omop_staging.sus_AE_treatment p\n\t\t\ton AE.MessageId = p.MessageId\n\twhere NHSNumber is not null\n\t",
      "lookup_table_markdown": null
    }
  ]
}